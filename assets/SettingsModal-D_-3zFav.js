import{c as P,r as p,j as e,L as D,b as G,d as v,D as L,T as F,v as K}from"./index-BrxcLGeD.js";import{M as _,U as q}from"./MessageModal-BF3EKuuJ.js";import{X as R}from"./x-BVOO3rRw.js";import{K as U,G as B}from"./key-D1L0BMmA.js";import{C as W}from"./check-DawilqLo.js";import{P as Y}from"./palette-C6nRAHMr.js";import"./circle-alert-BoEv356N.js";/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],X=P("database",J);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],H=P("sliders-vertical",Z),Q=i=>{if(!i||!i.startsWith("#"))return .5;const f=i.substring(1),a=parseInt(f,16),x=a>>16&255,l=a>>8&255,b=a>>0&255,c=[x,l,b].map(r=>(r/=255,r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)));return .2126*c[0]+.7152*c[1]+.0722*c[2]},y=i=>Q(i)>.5?"#0f172a":"#f8fafc",ee=Array.from({length:27},(i,f)=>{const a=f-12,x=a>=0?"+":"",l=a===9?"서울, 도쿄 (GMT+9)":a===0?"런던, 그리니치 (GMT+0)":a===-5?"뉴욕 (GMT-5)":`GMT${x}${a}`;return{offset:a,label:l}}),le=({isOpen:i,onClose:f,settings:a,onUpdateSettings:x,currentTheme:l,setTheme:b,presets:c,customColors:r,setCustomColors:g})=>{const[o,O]=p.useState(a.activeProvider),[j,k]=p.useState(!1),[N,V]=p.useState(""),[w,S]=p.useState(new Set(a.verifiedProviders||[])),[m,n]=p.useState({isOpen:!1,type:"info",title:"",message:"",onConfirm:()=>{}});p.useEffect(()=>{var s;i&&((s=window.updater)!=null&&s.getVersion?window.updater.getVersion().then(t=>{t&&V(t)}).catch(t=>{console.error("Failed to get version:",t)}):console.warn("Electron updater.getVersion not available (Web environment?)"))},[i]),p.useEffect(()=>{S(new Set(a.verifiedProviders||[]))},[a.verifiedProviders]);const z=async()=>{const s=a.keys[o];k(!0);try{await K(o,s);const t=Array.from(new Set([...a.verifiedProviders||[],o]));x({...a,activeProvider:o,verifiedProviders:t}),n({isOpen:!0,type:"success",title:"검증 성공",message:`${o.toUpperCase()} 설정이 적용되었습니다.`,onConfirm:()=>n(d=>({...d,isOpen:!1}))})}catch(t){n({isOpen:!0,type:"error",title:"검증 실패",message:t.message,onConfirm:()=>n(d=>({...d,isOpen:!1}))})}finally{k(!1)}},A=s=>{const t=(a.verifiedProviders||[]).filter(d=>d!==o);x({...a,keys:{...a.keys,[o]:s.target.value},verifiedProviders:t})},T=s=>{var C;const t=(C=s.target.files)==null?void 0:C[0];if(!t)return;const d=new FileReader;d.onload=async $=>{var M;try{const h=JSON.parse((M=$.target)==null?void 0:M.result),E=await v.restoreSystemBackup(h);n(E?{isOpen:!0,type:"success",title:"복원 완료",message:"전체 데이터가 성공적으로 복원되었습니다. 시스템을 재시작합니다.",onConfirm:()=>window.location.reload()}:{isOpen:!0,type:"error",title:"복원 실패",message:"유효하지 않은 데이터 형식입니다.",onConfirm:()=>n(I=>({...I,isOpen:!1}))})}catch{n({isOpen:!0,type:"error",title:"로드 오류",message:"파일을 읽는 중 오류가 발생했습니다.",onConfirm:()=>n(h=>({...h,isOpen:!1}))})}},d.readAsText(t)},u=p.useMemo(()=>{const s=c[l]||c.morning;return y(l==="custom"?r.bgTo:s.colors.bgTo)},[l,r,c]);return i?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(_,{isOpen:m.isOpen,type:m.type,title:m.title,message:m.message,onConfirm:m.onConfirm,onCancel:()=>n(s=>({...s,isOpen:!1}))}),e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md",onClick:f}),e.jsxs("div",{className:"relative w-full max-w-lg glass-panel rounded-[2.5rem] shadow-2xl flex flex-col h-[85vh] overflow-hidden border",style:{borderColor:"var(--glass-border)",backgroundColor:"var(--glass-bg)",color:u},children:[e.jsxs("div",{className:"flex items-center p-6 border-b shrink-0",style:{borderColor:"var(--glass-border)"},children:[e.jsx("h2",{className:"text-xl font-black",children:"시스템 설정"}),N&&e.jsxs("span",{className:"px-3 py-1 ml-auto mr-2 rounded-full bg-white/10 text-[10px] font-black opacity-60 border border-white/10 select-none tracking-widest",children:["v",N]}),e.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-black/10 transition-colors",children:e.jsx(R,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-10 custom-scrollbar",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 flex items-center gap-2",children:[e.jsx(U,{size:12})," AI 엔진 및 API KEY 설정"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 p-1 bg-[--bg-to] rounded-xl border border-white/5",children:["gemini","openai","claude","openrouter"].map(s=>e.jsx("button",{onClick:()=>O(s),className:`py-2 rounded-lg text-[10px] font-black transition-all flex items-center justify-center gap-1.5 ${o===s?"bg-[var(--accent-50)] text-white shadow-lg":"opacity-40 hover:opacity-100 hover:bg-white/5"}`,children:s.toUpperCase()},s))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",value:a.keys[o],onChange:A,placeholder:`${o.toUpperCase()} API KEY를 입력하세요...`,className:"w-full bg-[var(--accent-30)] hover:bg-[var(--accent-50)]  border border-white/10 rounded-xl pl-4 pr-20 py-3 text-xs outline-none focus:ring-1 focus:ring-indigo-500",style:{color:u}}),e.jsx("button",{onClick:z,disabled:j,className:`absolute right-1.5 top-1.5 bottom-1.5 px-4 rounded-lg text-white text-[10px] font-black shadow-lg transition-all flex items-center justify-center gap-1 ${w.has(o)?"bg-emerald-500":"bg-[var(--accent-50)]"}`,children:j?e.jsx(D,{size:12,className:"animate-spin"}):w.has(o)?e.jsx(W,{size:14}):"검증"})]}),e.jsx("p",{className:"text-[9px] opacity-40 italic mt-1 leading-relaxed",children:"* API 키는 브라우저 로컬 저장소에 안전하게 보관됩니다."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 flex items-center gap-2",children:[e.jsx(B,{size:12})," 지역 및 시간대"]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:a.timezoneOffset,onChange:s=>x({...a,timezoneOffset:parseInt(s.target.value)}),className:"w-full bg-[var(--accent-30)] border border-white/10 rounded-xl px-4 py-3 text-xs outline-none appearance-none font-bold cursor-pointer transition-all hover:bg-[var(--accent-50)] ",style:{color:u},children:ee.map(s=>e.jsx("option",{value:s.offset,className:"bg-slate-900 text-white",children:s.label},s.offset))}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:e.jsx(G,{size:14})})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 flex items-center gap-2",children:[e.jsx(Y,{size:12})," 테마 프리셋"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.values(c).map(s=>e.jsxs("button",{onClick:()=>b(s.id),className:`p-3 rounded-2xl border flex items-center gap-3 transition-all ${l===s.id?"ring-2 ring-indigo-500":""}`,style:{background:`linear-gradient(135deg, ${s.colors.bgFrom}, ${s.colors.bgTo})`,borderColor:"rgba(255,255,255,0.1)"},children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.colors.accentPrimary}}),e.jsx("span",{className:"font-black text-xs",style:{color:y(s.colors.bgTo)},children:s.name})]},s.id))}),l==="custom"&&e.jsxs("div",{className:"p-4 rounded-[2rem] bg-black/5 border border-white/5 space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase opacity-40",children:"커스텀 색상 지정"}),e.jsx(H,{size:14,className:"opacity-40"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("input",{type:"color",value:r.bgFrom,onChange:s=>g({...r,bgFrom:s.target.value}),className:"w-20 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0"}),e.jsx("span",{className:"text-[8px] font-black opacity-50 uppercase",children:"시작색"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("input",{type:"color",value:r.bgTo,onChange:s=>g({...r,bgTo:s.target.value}),className:"w-20 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0"}),e.jsx("span",{className:"text-[8px] font-black opacity-50 uppercase",children:"종료색"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("input",{type:"color",value:r.accent,onChange:s=>g({...r,accent:s.target.value}),className:"w-20 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0"}),e.jsx("span",{className:"text-[8px] font-black opacity-50 uppercase",children:"강조색"})]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 flex items-center gap-2",children:[e.jsx(X,{size:12})," 데이터 관리"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>v.createSystemBackup(),className:"flex items-center justify-center gap-2 p-4 rounded-xl bg-[var(--accent-30)] border border-white/5 text-[10px] font-black hover:bg-[var(--accent-50)] transition-colors",children:[e.jsx(L,{size:14})," 전체 백업"]}),e.jsxs("label",{className:"flex items-center justify-center gap-2 p-4 rounded-xl bg-[var(--accent-30)] border border-white/5 cursor-pointer text-[10px] font-black hover:bg-[var(--accent-50)] transition-colors",children:[e.jsx(q,{size:14})," 전체 복원",e.jsx("input",{type:"file",className:"hidden",onChange:T,accept:".json"})]})]}),e.jsxs("button",{onClick:()=>n({isOpen:!0,type:"confirm",title:"초기화",message:"정말로 모든 데이터를 삭제하시겠습니까?",onConfirm:()=>v.clearAllData()}),className:"w-full p-3 rounded-xl bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500/30 text-rose-500 font-black text-[10px]",children:[e.jsx(F,{size:12,className:"inline mr-1"})," 데이터 초기화"]})]})]})]})]}):null};export{le as default};
