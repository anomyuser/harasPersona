import{c as N,r as i,j as e,S as de,f as mt,C as ht,p as Q,d as le,A as He,M as ut,i as Oe,P as oe,T as ne,a as bt,U as gt,b as R}from"./index-C1CIONHV.js";import{S as yt,T as ce,R as ft,a as vt}from"./RelationshipResultView-DLzBJRWd.js";import{B as W,F as G,G as jt}from"./share-2-CgzU6msx.js";import{X as I,C as wt}from"./x-DoXCJK8m.js";import{L as Ve}from"./RadarChart-B6gbTz-F.js";import{C as Nt}from"./check-7g-1WjAg.js";import{P as kt}from"./palette-DoMyXat2.js";import{U as Ct}from"./users-Qpe1gNvS.js";import{S as St}from"./save-BczRCgK0.js";/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],It=N("baby",zt);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1",key:"1pmlyh"}],["path",{d:"M15 14a5 5 0 0 0-7.584 2",key:"5rb254"}],["path",{d:"M9.964 6.825C8.019 7.977 9.5 13 8 15",key:"kbvsx9"}]],Tt=N("biceps-flexed",Et);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],F=N("chevron-up",Dt);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],_t=N("clipboard-check",Mt);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Pt=N("folder",At);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]],Ft=N("images",Rt);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Bt=N("maximize-2",$t);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ke=N("pencil",Lt);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"M10 20h4",key:"ni2waw"}],["path",{d:"M12 16v6",key:"c8a4gj"}],["path",{d:"M17 2h4v4",key:"vhe59"}],["path",{d:"m21 2-5.46 5.46",key:"19kypf"}],["circle",{cx:"12",cy:"11",r:"5",key:"16gxyc"}]],Ut=N("venus-and-mars",Jt),Ot=[{id:1,text:"사람들이 북적이는 파티에서 캐릭터는 활력을 얻는 편인가요?",trait:"E"},{id:2,text:"주말에 약속이 없으면 캐릭터는 우울함을 느끼기보다 편안함을 느끼나요?",trait:"I"},{id:3,text:"새로운 사람을 만날 때 먼저 말을 거는 쪽인가요?",trait:"E"},{id:4,text:"캐릭터는 혼자만의 시간을 가질 때 배터리가 충전된다고 느끼나요?",trait:"I"},{id:5,text:"모르는 사람들과의 식사 자리에서도 자연스럽게 분위기를 주도하나요?",trait:"E"},{id:6,text:"현실적인 사실이나 수치보다 가능성과 영감을 더 신뢰하나요?",trait:"N"},{id:7,text:"물건을 고를 때 기능보다 디자인이나 브랜드 스토리에 더 끌리나요?",trait:"N"},{id:8,text:"세부적인 매뉴얼을 읽기보다 일단 직접 만져보며 원리를 파악하나요?",trait:"S"},{id:9,text:"반복적인 일상에서도 안정감을 느끼며 계획대로 움직이는 것을 선호하나요?",trait:"S"},{id:10,text:"상상 속에 빠져들어 실제 일어날 법하지 않은 일들을 고민하곤 하나요?",trait:"N"},{id:11,text:"친구의 고민을 들을 때 해결책을 제시하기보다 감정적으로 공감해주나요?",trait:"F"},{id:12,text:"논쟁이 벌어지면 감정보다 사실 관계를 따져서 시시비비를 가리나요?",trait:"T"},{id:13,text:"영화나 책을 볼 때 인물의 심리 묘사보다 전체적인 구조와 인과관계에 집중하나요?",trait:"T"},{id:14,text:"주변 사람들의 기분이 캐릭터 자신의 기분에도 큰 영향을 주나요?",trait:"F"},{id:15,text:"공정함보다 배려가 더 중요한 가치라고 믿나요?",trait:"F"},{id:16,text:"여행을 갈 때 분 단위로 일정을 짜야 마음이 편안한가요?",trait:"J"},{id:17,text:"계획이 틀어지는 상황을 유연하게 즐기며 대처할 수 있나요?",trait:"P"},{id:18,text:"마감 직전에 집중력이 폭발하며 긴장감을 즐기는 편인가요?",trait:"P"},{id:19,text:"책상은 항상 정리되어 있고, 물건은 제자리에 있어야 하나요?",trait:"J"},{id:20,text:"한 가지 일을 끝내기 전에 새로운 흥미로운 일을 시작하는 경향이 있나요?",trait:"P"}],Ht=[{id:1,text:"사소한 실수에도 스스로를 강하게 질책하며 완벽함을 추구하나요?",trait:"1"},{id:2,text:"타인의 필요를 본능적으로 알아채고 돕고 싶어 하나요?",trait:"2"},{id:3,text:"성공과 효율성을 위해 자신의 감정을 억누르는 일이 잦나요?",trait:"3"},{id:4,text:"자신만의 독특한 분위기와 감수성을 소중히 여기며 평범함을 거부하나요?",trait:"4"},{id:5,text:"세상을 관찰하고 지식을 쌓는 것에서 안도감을 느끼나요?",trait:"5"},{id:6,text:"예상치 못한 위험에 대비하며 신뢰할 수 있는 사람이나 체계에 의존하나요?",trait:"6"},{id:7,text:"고통스러운 감정을 피하기 위해 항상 즐거운 계획을 세우나요?",trait:"7"},{id:8,text:"상황을 통제하고 힘의 우위를 점하는 것이 안전하다고 느끼나요?",trait:"8"},{id:9,text:"갈등을 회피하며 모든 것이 평화롭고 조화롭기를 원하나요?",trait:"9"},{id:10,text:"정해진 규칙이나 도덕적 기준을 어기는 것을 극도로 꺼리나요?",trait:"1"},{id:11,text:"내가 준 사랑만큼 상대방이 돌려주지 않으면 큰 상실감을 느끼나요?",trait:"2"},{id:12,text:"사람들에게 능력 있는 사람으로 보이기 위해 외적인 이미지를 관리하나요?",trait:"3"},{id:13,text:"슬픔이나 우울함에 깊이 침잠하여 그것을 예술적으로 승화시키곤 하나요?",trait:"4"},{id:14,text:"자신의 프라이버시를 매우 중시하며 에너지를 고갈시키는 활동을 피하나요?",trait:"5"},{id:15,text:"최악의 상황을 가정하고 대비할 때 오히려 마음이 편해지나요?",trait:"6"},{id:16,text:"새로운 자극이 없으면 쉽게 지루함을 느끼고 산만해지나요?",trait:"7"},{id:17,text:"약점을 보이는 것을 수치스럽게 여기며 강인함을 유지하려 애쓰나요?",trait:"8"},{id:18,text:"남들의 주장에 동조하며 자신의 의견을 내세우지 않는 편인가요?",trait:"9"},{id:19,text:"주변 환경이 어질러져 있으면 견디기 힘들어 하나요?",trait:"1"},{id:20,text:"다른 사람의 인정을 받는 것보다 내가 도움이 되었다는 사실 자체가 중요한가요?",trait:"2"},{id:21,text:"가장 높은 목표를 달성하는 것이 삶의 가장 큰 기쁨인가요?",trait:"3"},{id:22,text:"누구도 나를 진정으로 이해하지 못한다고 느낄 때가 많나요?",trait:"4"},{id:23,text:"논리적 근거가 부족한 주장에는 강한 거부감을 느끼나요?",trait:"5"},{id:24,text:"동료나 친구와의 의리가 인생에서 가장 소중한 가치인가요?",trait:"6"},{id:25,text:"낙천적인 태도로 주변 사람들에게 활력을 주는 편인가요?",trait:"7"},{id:26,text:"한번 옳다고 믿는 일은 끝까지 밀어붙이는 돌파력이 있나요?",trait:"8"},{id:27,text:"복잡한 결정 상황에서 그냥 흐름에 맡기는 편인가요?",trait:"9"}],Vt=[{id:1,text:"새로운 무언가를 창조하고 흔적을 남기는 것에 가치를 두나요?",trait:"Creator"},{id:2,text:"주변 사람들을 돌보고 그들의 고통을 덜어주는 것이 사명인가요?",trait:"Caregiver"},{id:3,text:"질서를 확립하고 조직을 안정적으로 운영하려 노력하나요?",trait:"Ruler"},{id:4,text:"직관을 따르며 불가능해 보이는 변화를 현실로 만들어내나요?",trait:"Magician"},{id:5,text:"어려운 도전에 맞서 용기를 발휘하고 승리하려 애쓰나요?",trait:"Hero"},{id:6,text:"기존의 체제를 뒤엎고 혁명적인 변화를 일으키고 싶어 하나요?",trait:"Outlaw"},{id:7,text:"미지의 세계를 탐험하며 자유와 경험을 추구하나요?",trait:"Explorer"},{id:8,text:"진리를 탐구하고 세상을 이해하는 지혜를 얻고 싶어 하나요?",trait:"Sage"},{id:9,text:"유머와 즐거움을 통해 사람들을 웃게 하고 현재를 즐기나요?",trait:"Jester"},{id:10,text:"소속감을 느끼고 평범한 사람들과 어울리며 연대하고 싶어 하나요?",trait:"Orphan"},{id:11,text:"세상은 안전하고 아름다우며, 낙원이 존재한다고 믿고 싶어 하나요?",trait:"Innocent"},{id:12,text:"친밀한 관계를 맺고 사랑받는 것에서 삶의 의미를 찾나요?",trait:"Lover"},{id:13,text:"남들이 생각하지 못한 기발한 아이디어를 실현하는 것이 즐겁나요?",trait:"Creator"},{id:14,text:"내가 희생하더라도 타인의 행복을 먼저 생각하는 편인가요?",trait:"Caregiver"},{id:15,text:"권위를 가지고 상황을 통제할 때 가장 자신감이 넘치나요?",trait:"Ruler"},{id:16,text:"세상의 보이지 않는 흐름이나 기운을 느끼는 편인가요?",trait:"Magician"},{id:17,text:"자신의 명예와 자부심을 지키기 위해 기꺼이 투쟁하나요?",trait:"Hero"},{id:18,text:"사회적 통념이나 금기를 깨트릴 때 해방감을 느끼나요?",trait:"Outlaw"},{id:19,text:"어디에도 얽매이지 않는 독립적인 삶을 동경하나요?",trait:"Explorer"},{id:20,text:"객관적인 사실과 데이터를 분석하는 것을 좋아하나요?",trait:"Sage"},{id:21,text:"심각한 상황에서도 분위기를 환기시키는 위트가 있나요?",trait:"Jester"},{id:22,text:"특별 취급을 받기보다 무리에 섞여 안정감을 찾고 싶나요?",trait:"Orphan"},{id:23,text:"사람들이 기본적으로 선하다고 믿으며 긍정적으로 생각하나요?",trait:"Innocent"},{id:24,text:"아름다운 것에 매료되며 감각적인 쾌락을 소중히 여기나요?",trait:"Lover"}],Kt=({isOpen:r,onClose:j,type:h,characterName:k,onComplete:C})=>{const y=i.useMemo(()=>h==="mbti"?Ot:h==="enneagram"?Ht:Vt,[h]),[p,a]=i.useState(0),[n,$]=i.useState({}),[D,M]=i.useState(!1),w=Math.round((p+1)/y.length*100),d=l=>{$({...n,[y[p].id]:l}),p<y.length-1?a(p+1):M(!0)},S=()=>{if(h==="mbti"){const l={EI:0,SN:0,TF:0,JP:0};y.forEach(c=>{const f=n[c.id]-3;c.trait==="E"?l.EI+=f:c.trait==="I"?l.EI-=f:c.trait==="N"?l.SN+=f:c.trait==="S"?l.SN-=f:c.trait==="F"?l.TF+=f:c.trait==="T"?l.TF-=f:c.trait==="P"?l.JP+=f:c.trait==="J"&&(l.JP-=f)});const u=(l.EI>=0?"E":"I")+(l.SN<0?"S":"N")+(l.TF<0?"T":"F")+(l.JP<0?"J":"P"),b=Q[u]||"인지적 필연성과 행동의 결을 관통하는 고유의 문법입니다.";C(u,b)}else if(h==="enneagram"){const l={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};y.forEach(E=>{l[E.trait]+=n[E.id]});const u=Object.entries(l).sort((E,X)=>X[1]-E[1])[0][0],b=parseInt(u),c=b===1?9:b-1,z=b===9?1:b+1,f=l[c.toString()]>=l[z.toString()]?c:z,_=`${u}w${f}`,U=Q[_]||"영혼 깊은 곳의 결핍과 그것을 채우려는 처절한 갈망의 지도입니다.";C(_,U)}else{const l={};y.forEach(c=>{l[c.trait]=(l[c.trait]||0)+n[c.id]});const u=Object.entries(l).sort((c,z)=>z[1]-c[1])[0][0],b=Q[u]||"인류의 무의식이 공유하는 신화적 역할이자 서사의 중력입니다.";C(u,b)}};return r?e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-xl glass-panel rounded-[3rem] border border-white/20 shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",style:{backgroundColor:"var(--glass-bg)",color:"var(--text-primary)"},children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-white/10 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-indigo-600 text-white shadow-lg",children:h==="mbti"?e.jsx(W,{size:20}):h==="enneagram"?e.jsx(G,{size:20}):e.jsx(de,{size:20})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-black",children:[k," 유형 테스트"]}),e.jsxs("p",{className:"text-[10px] opacity-40 uppercase tracking-widest font-bold",children:[h.toUpperCase()," 심리 측정"]})]})]}),e.jsx("button",{onClick:j,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(I,{size:24})})]}),D?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-10 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500 blur-3xl opacity-20 animate-pulse"}),e.jsx("div",{className:"p-8 rounded-full bg-white/5 border border-white/10 relative z-10 shadow-2xl",children:e.jsx(ht,{size:64,className:"text-indigo-400 animate-bounce-in"})})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("h3",{className:"text-2xl font-black",children:"테스트가 완료되었습니다"}),e.jsxs("p",{className:"text-sm opacity-60 font-medium",children:["분석된 데이터를 바탕으로 ",k,"의 유형을 확정합니다."]})]}),e.jsxs("button",{onClick:S,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl font-black text-sm shadow-xl transition-all transform hover:scale-105 active:scale-95 flex items-center justify-center gap-3",children:[e.jsx(yt,{size:18})," 결과 적용하기"]})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-10 space-y-8 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-black opacity-40 px-1 uppercase tracking-widest",children:[e.jsxs("span",{children:["Question ",p+1," / ",y.length]}),e.jsxs("span",{children:[w,"% Completed"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-500 ease-out shadow-[0_0_10px_rgba(99,102,241,0.5)]",style:{width:`${w}%`}})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold leading-tight animate-fade-in-up",children:y[p].text},p),e.jsx("div",{className:"grid grid-cols-1 gap-3 pt-4",children:[{score:5,label:"매우 그렇다",color:"bg-emerald-500"},{score:4,label:"대체로 그렇다",color:"bg-emerald-500/60"},{score:3,label:"보통이다",color:"bg-slate-500/40"},{score:2,label:"거의 아니다",color:"bg-rose-500/60"},{score:1,label:"전혀 아니다",color:"bg-rose-500"}].map(l=>e.jsxs("button",{onClick:()=>d(l.score),className:"group relative flex items-center justify-between p-5 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 hover:border-indigo-500/50 transition-all text-left overflow-hidden",children:[e.jsx("div",{className:`absolute inset-y-0 left-0 w-1 transition-all group-hover:w-2 ${l.color}`}),e.jsx("span",{className:"text-sm font-bold ml-2",children:l.label}),e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((u,b)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${b<l.score?l.color:"bg-white/10"}`},b))})]},l.score))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/5",children:[e.jsxs("button",{disabled:p===0,onClick:()=>a(p-1),className:"flex items-center gap-2 text-xs font-black opacity-40 hover:opacity-100 disabled:opacity-10 transition-all",children:[e.jsx(mt,{size:16})," 이전 문항"]}),e.jsx("p",{className:"text-[10px] font-black opacity-20 italic",children:"일상적인 상황에서 캐릭터가 보일 반응을 선택하세요."})]})]})]})}):null},Yt=["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP","ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"],Qt=["1w9","1w2","2w1","2w3","3w2","3w4","4w3","4w5","5w4","5w6","6w5","6w7","7w6","7w8","8w7","8w9","9w8","9w1"],Wt=["Creator","Caregiver","Ruler","Magician","Hero","Outlaw","Explorer","Sage","Jester","Everyman","Innocent","Lover"],J=r=>typeof r=="string"?r:r&&typeof r=="object"?r.bestMatch&&r.why?`${r.bestMatch}

${r.why}`:JSON.stringify(r):String(r||""),Gt=r=>{if(!r||!r.startsWith("#"))return .5;const j=r.substring(1),h=parseInt(j,16),k=h>>16&255,C=h>>8&255,y=h>>0&255,p=[k,C,y].map(a=>(a/=255,a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)));return .2126*p[0]+.7152*p[1]+.0722*p[2]},Ye=r=>Gt(r)>.5?"#0f172a":"#f8fafc",Y=({result:r,type:j,themeColor:h,onClick:k})=>{var $,D,M,w,d,S,l,u,b;const C={mbti:e.jsx(W,{size:18}),enneagram:e.jsx(G,{size:18}),archetype:e.jsx(de,{size:18}),symbol:e.jsx(Ve,{size:18})},p={mbti:{label:"MBTI",val:(($=r==null?void 0:r.mbti)==null?void 0:$.type)||"N/A",desc:((D=r==null?void 0:r.mbti)==null?void 0:D.description)||""},enneagram:{label:"에니어그램",val:((M=r==null?void 0:r.enneagram)==null?void 0:M.type)||"N/A",desc:((w=r==null?void 0:r.enneagram)==null?void 0:w.description)||""},archetype:{label:"원형",val:He[(d=r==null?void 0:r.archetype)==null?void 0:d.name]||((S=r==null?void 0:r.archetype)==null?void 0:S.name)||"N/A",desc:((l=r==null?void 0:r.archetype)==null?void 0:l.description)||""},symbol:{label:"상징물",val:((u=r==null?void 0:r.symbolicImage)==null?void 0:u.symbol)||"-",desc:((b=r==null?void 0:r.symbolicImage)==null?void 0:b.description)||"-"}}[j],a=i.useMemo(()=>getComputedStyle(document.documentElement).getPropertyValue("--bg-from").trim()||"#ffffff",[]),n=i.useMemo(()=>Ye(a),[a]);return e.jsxs("div",{className:"group relative flex-1",children:[e.jsxs("div",{onClick:k,className:"p-3 md:p-4 rounded-xl md:rounded-2xl bg-white/20 border border-white/20 flex flex-col items-center gap-2 hover:bg-white/40 transition-all hover:-translate-y-1 shadow-sm backdrop-blur-sm cursor-pointer",children:[e.jsx("div",{style:{color:h??"var(--text-primary)"},children:C[j]}),e.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase opacity-60 tracking-widest text-center",style:{color:"var(--text-primary)"},children:p.label}),e.jsx("span",{className:"text-[11px] md:text-sm font-black text-center",style:{color:"var(--text-primary)"},children:p.val})]}),e.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 w-64 p-5 rounded-2xl border border-white/20 text-[11px] opacity-0 group-hover:opacity-100 transition-all pointer-events-none z-[100] shadow-2xl text-center backdrop-blur-xl",style:{backgroundColor:a,color:n,borderColor:"rgba(255,255,255,0.1)"},children:[e.jsx("div",{className:"font-black mb-1.5 border-b pb-1.5",style:{color:h??"var(--text-primary)",borderColor:"rgba(255,255,255,0.1)"},children:p.val}),e.jsx("p",{className:"opacity-80 leading-relaxed font-bold",children:J(p.desc)}),e.jsxs("div",{className:"mt-2 text-[8px] opacity-40 font-black flex items-center justify-center gap-1",children:[e.jsx(Ke,{size:8})," 클릭하여 수정"]})]})]})},Xt=({character:r,isOpen:j,onClose:h,onSave:k,onDelete:C,onGoToAnalysis:y})=>{var De,Me,_e,Ae,Pe;const p=t=>({...t,aliases:Array.isArray(t.aliases)?t.aliases:[],labels:Array.isArray(t.labels)?t.labels:[],biography:Array.isArray(t.biography)?t.biography:[],galleryImages:Array.isArray(t.galleryImages)?t.galleryImages:[],additionalImages:Array.isArray(t.additionalImages)?t.additionalImages:[]}),[a,n]=i.useState(()=>p(r)),[$,D]=i.useState([]),[M,w]=i.useState(!1),[d,S]=i.useState(null),[l,u]=i.useState(""),[b,c]=i.useState(""),[z,f]=i.useState(!1),_=i.useRef(null),[U,E]=i.useState(!1),[X,xe]=i.useState(!0),[pe,Qe]=i.useState(0),O=i.useRef(null),[We,Z]=i.useState(null),[Ge,q]=i.useState(null);i.useEffect(()=>{n(p(r)),le.loadProfiles().then(D)},[r]),i.useEffect(()=>{if(d&&d!=="symbol"&&_.current){const t=_.current.querySelector('[data-active="true"]');t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},[l,d]),i.useEffect(()=>{const t=()=>{if(!O.current)return;const o=O.current.scrollTop;o>pe&&o>60?xe(!1):xe(!0),Qe(o)},s=O.current;return s&&s.addEventListener("scroll",t),()=>s==null?void 0:s.removeEventListener("scroll",t)},[pe]);const[Xe,me]=i.useState(!1),ee=i.useRef(null),[Ze,he]=i.useState(!1),te=i.useRef(null),H=(t,s)=>{t(o=>(!o&&(s!=null&&s.current)&&setTimeout(()=>{var x;return(x=s.current)==null?void 0:x.focus()},0),!o))},[ue,qe]=i.useState([]),[be,et]=i.useState([]),[tt,at]=i.useState({}),[v,st]=i.useState({analysis:!0,shadow:!0,notes:!0,appearance:!1,gallery:!0,biography:!1}),[ge,ye]=i.useState(null),[fe,ve]=i.useState(""),[ae,je]=i.useState(""),[se,we]=i.useState(""),Ne=()=>new Date().toISOString().slice(0,10),[re,ke]=i.useState(Ne()),[ie,Ce]=i.useState(""),Se=i.useRef(null),ze=i.useRef(null),Ie=i.useRef(null);i.useEffect(()=>{j&&(async()=>{qe(await le.loadNarrativeCategories()),et(await le.loadRelationships()),at(JSON.parse(localStorage.getItem("psychopersona_manual_relationship_types")||"{}"))})()},[j]);const Ee=i.useMemo(()=>{const t=be.filter(o=>o.char1Name===a.name||o.char2Name===a.name),s=new Map;return t.forEach(o=>{const x=o.char1Name===a.name?o.char2Name:o.char1Name,g=s.get(x);(!g||o.timestamp>g.timestamp)&&s.set(x,o)}),Array.from(s.values())},[be,a.name]),rt=i.useMemo(()=>ue.filter(t=>t.id!=="default"),[ue]),Te=i.useMemo(()=>[...a.biography].sort((t,s)=>new Date(t.date).getTime()-new Date(s.date).getTime()),[a.biography]),A=t=>st(s=>({...s,[t]:!s[t]})),it=()=>{const t=fe.trim();t&&(a.aliases.includes(t)||(n({...a,aliases:[...a.aliases,t]}),ve("")))},lt=()=>{if(ae.trim()&&se.trim()){const t={id:crypto.randomUUID(),key:ae.trim(),value:se.trim()};n({...a,labels:[...a.labels,t]}),je(""),we("")}},ot=()=>{if(re&&ie.trim()){const t={id:crypto.randomUUID(),date:re,event:ie.trim()};n({...a,biography:[...a.biography,t]}),ke(Ne()),Ce("")}},nt=(t,s)=>{n({...a,biography:a.biography.map(o=>o.id===t?{...o,date:s}:o)})},ct=(t,s)=>{n({...a,biography:a.biography.map(o=>o.id===t?{...o,event:s}:o)})},V=t=>{var s,o,x,g,m,B,T,L,K,Re,Fe,$e,Be,Le,Je,Ue;S(t),t==="mbti"?(u(((o=(s=a.analysisData)==null?void 0:s.mbti)==null?void 0:o.type)||""),c(((g=(x=a.analysisData)==null?void 0:x.mbti)==null?void 0:g.description)||"")):t==="enneagram"?(u(((B=(m=a.analysisData)==null?void 0:m.enneagram)==null?void 0:B.type)||""),c(((L=(T=a.analysisData)==null?void 0:T.enneagram)==null?void 0:L.description)||"")):t==="archetype"?(u(((Re=(K=a.analysisData)==null?void 0:K.archetype)==null?void 0:Re.name)||""),c((($e=(Fe=a.analysisData)==null?void 0:Fe.archetype)==null?void 0:$e.description)||"")):t==="symbol"&&(u(((Le=(Be=a.analysisData)==null?void 0:Be.symbolicImage)==null?void 0:Le.symbol)||""),c(((Ue=(Je=a.analysisData)==null?void 0:Je.symbolicImage)==null?void 0:Ue.description)||""))},dt=()=>{if(!d)return;const t={...a.analysisData};d==="mbti"?t.mbti={type:l,description:b}:d==="enneagram"?t.enneagram={type:l,description:b}:d==="archetype"?t.archetype={name:l,description:b}:d==="symbol"&&(t.symbolicImage={symbol:l,description:b}),n({...a,analysisData:t}),S(null)},xt=t=>{u(t);const s=Q[t]||"상세 설명이 준비되지 않았습니다.";c(s)},pt=(t,s)=>{u(t),c(s),f(!1)};if(!j)return null;const P="w-full flex justify-between items-center text-[13px] md:text-[14px] font-black opacity-70 group-hover:opacity-100 uppercase tracking-[0.2em] transition-all";return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-0 md:p-4 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md animate-fade-in",onClick:h}),z&&d&&d!=="symbol"&&e.jsx(Kt,{isOpen:z,onClose:()=>f(!1),type:d,characterName:a.name,onComplete:pt}),d&&e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-xs glass-panel p-6 rounded-[2.5rem] border border-white/20 shadow-2xl animate-bounce-in flex flex-col gap-5",style:{backgroundColor:"var(--glass-bg)",color:"var(--text-primary)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest opacity-60 flex items-center gap-2",children:[d==="mbti"?e.jsx(W,{size:16}):d==="enneagram"?e.jsx(G,{size:16}):d==="archetype"?e.jsx(de,{size:16}):e.jsx(Ve,{size:16}),"유형 편집"]}),e.jsx("button",{onClick:()=>S(null),className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(I,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[d!=="symbol"?e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black opacity-40 ml-1",children:"유형 선택"}),e.jsx("div",{ref:_,className:"grid grid-cols-3 gap-1 max-h-32 overflow-y-auto custom-scrollbar p-1 bg-black/20 rounded-xl border border-white/5",children:(d==="mbti"?Yt:d==="enneagram"?Qt:Wt).map(t=>e.jsx("button",{"data-active":l===t,onClick:()=>xt(t),className:`px-1 py-2 rounded-lg text-[9px] font-black transition-all border ${l===t?"bg-indigo-600 border-indigo-500 text-white shadow-lg":"bg-white/5 border-white/5 opacity-50 hover:opacity-100"}`,children:d==="archetype"&&He[t]||t},t))})]}):e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black opacity-40 ml-1",children:"상징물 이름"}),e.jsx("input",{type:"text",value:l,onChange:t=>u(t.target.value),placeholder:"예: 시든 장미",className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-xs outline-none focus:ring-1 focus:ring-indigo-500",style:{color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black opacity-40 ml-1",children:"상세 설명"}),e.jsx("textarea",{value:b,onChange:t=>c(t.target.value),placeholder:"분석 내용을 입력하세요...",className:"w-full h-36 bg-black/30 border border-white/10 rounded-2xl p-4 text-xs leading-relaxed outline-none focus:ring-1 focus:ring-indigo-500 resize-none custom-scrollbar shadow-inner",style:{color:"var(--text-primary)"}})]})]}),e.jsxs("div",{className:"space-y-2",children:[d!=="symbol"&&e.jsxs("button",{onClick:()=>f(!0),className:"w-full py-2.5 bg-indigo-500/10 border border-indigo-500/20 hover:bg-indigo-500/20 text-indigo-400 rounded-xl font-black text-[10px] transition-all flex items-center justify-center gap-2",children:[e.jsx(_t,{size:14})," 테스트로 확인하기"]}),e.jsxs("button",{onClick:dt,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(Nt,{size:16})," 변경사항 저장"]})]})]})}),ge&&e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/90 p-4 md:p-10 animate-fade-in cursor-zoom-out",onClick:()=>ye(null),children:[e.jsx("img",{src:ge,className:"max-w-full max-h-full object-contain shadow-2xl rounded-xl",alt:"Preview"}),e.jsx("button",{className:"absolute top-6 right-6 p-4 text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx(I,{size:32})})]}),e.jsxs("div",{className:"relative w-full max-w-6xl rounded-none md:rounded-[3rem] shadow-[0_40px_100px_rgba(0,0,0,0.3)] flex flex-col md:flex-row overflow-hidden h-full md:h-[92vh] border-0 md:border md:border-white/40 animate-bounce-in transition-all duration-700",style:{background:`linear-gradient(135deg, ${a.hairColor}ff 0%, ${a.eyeColor}40 50%, var(--bg-to) 100%)`},children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),E(!U)},className:"md:hidden fixed left-0 top-1/2 -translate-y-1/2 z-[110] p-1.5 rounded-r-xl bg-white/20 backdrop-blur-md border border-l-0 border-white/30 text-white shadow-xl",children:e.jsx(ut,{size:20})}),e.jsxs("div",{className:`fixed md:relative inset-y-0 left-0 z-[120] md:z-10 w-72 md:w-80 h-full bg-white/10 border-r border-white/20 flex flex-col shrink-0 overflow-hidden backdrop-blur-xl transition-transform duration-500 ease-in-out ${U?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[e.jsxs("div",{className:"relative aspect-[3/4] landscape:aspect-[16/9] md:landscape:aspect-[3/4] group cursor-pointer shrink-0 shadow-sm",onClick:()=>{var t;return(t=Se.current)==null?void 0:t.click()},children:[a.imageUrl?e.jsx("img",{src:a.imageUrl,className:"w-full h-full object-cover",alt:a.name}):e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-30 bg-black/5",children:e.jsx(Oe,{size:56,style:{color:"var(--text-primary)"}})}),e.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity backdrop-blur-sm",children:e.jsx(Oe,{style:{color:"var(--text-primary)"},size:32})}),e.jsx("input",{type:"file",ref:Se,className:"hidden",accept:"image/*",onChange:t=>{var o;const s=(o=t.target.files)==null?void 0:o[0];if(s){const x=new FileReader;x.onload=g=>{var m;return n({...a,imageUrl:(m=g.target)==null?void 0:m.result})},x.readAsDataURL(s)}}}),e.jsx("button",{onClick:t=>{t.stopPropagation(),E(!1)},className:"md:hidden absolute top-4 right-4 p-2 rounded-full bg-black/40 text-white hover:bg-black/60 transition-colors z-[130]",children:e.jsx(I,{size:18})})]}),e.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto custom-scrollbar flex-1 pb-16",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black opacity-60 uppercase tracking-widest flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(ce,{size:14})," 기본프로필"]}),e.jsxs("div",{className:"grid grid-cols-[0.6fr_0.6fr_1.2fr] gap-1.5",children:[e.jsxs("div",{className:"grid grid-rows-[auto_1fr] gap-0.5 w-full items-center p-1 rounded-xl bg-white/20 border border-white/20 shadow-sm backdrop-blur-md hover:bg-white/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(It,{size:12,style:{color:a.hairColor}}),e.jsx("span",{className:"text-[8px] font-black opacity-40 uppercase",style:{color:"var(--text-primary)"},children:"나이"})]}),e.jsx("input",{type:"text",value:a.age||"",onChange:t=>n({...a,age:t.target.value}),placeholder:"예: 25세",className:"w-full bg-transparent border-none p-0 text-[11px] font-bold outline-none text-center",style:{color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"grid grid-rows-[auto_1fr] gap-0.5 w-full items-center p-1 rounded-xl bg-white/20 border border-white/20 shadow-sm backdrop-blur-md hover:bg-white/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ut,{size:12,style:{color:a.hairColor}}),e.jsx("span",{className:"text-[8px] font-black opacity-40 uppercase",style:{color:"var(--text-primary)"},children:"성별"})]}),e.jsx("input",{type:"text",value:a.gender||"",onChange:t=>n({...a,gender:t.target.value}),placeholder:"예: 남",className:"w-full bg-transparent border-none p-0 text-[11px] font-bold outline-none text-center",style:{color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"grid grid-rows-[auto_1fr] gap-0.5 w-full items-center p-1 rounded-xl bg-white/20 border border-white/20 shadow-sm backdrop-blur-md hover:bg-white/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Tt,{size:12,style:{color:a.hairColor}}),e.jsx("span",{className:"text-[8px] font-black opacity-40 uppercase",style:{color:"var(--text-primary)"},children:"체형"})]}),e.jsx("input",{type:"text",value:a.height||"",onChange:t=>n({...a,height:t.target.value}),placeholder:"예: 180/건장",className:"w-full bg-transparent border-none p-0 text-[11px] font-bold outline-none text-center",style:{color:"var(--text-primary)"}})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black opacity-40 uppercase tracking-widest flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(kt,{size:14})," 캐릭터 고유색"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[e.jsxs("div",{className:"flex items-stretch rounded-xl overflow-hidden bg-white/30 border border-white/20 hover:bg-white/50 transition-colors shadow-sm",children:[e.jsx("div",{className:"flex items-center px-2",children:e.jsx("span",{className:"text-[9px] font-black opacity-60",style:{color:"var(--text-primary)"},children:"머리"})}),e.jsx("div",{className:"flex-1 relative cursor-pointer",style:{backgroundColor:a.hairColor},children:e.jsx("input",{type:"color",value:a.hairColor,onChange:t=>n({...a,hairColor:t.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"})})]}),e.jsxs("div",{className:"flex items-stretch rounded-xl overflow-hidden bg-white/30 border border-white/20 hover:bg-white/50 transition-colors shadow-sm",children:[e.jsx("div",{className:"flex items-center px-2",children:e.jsx("span",{className:"text-[9px] font-black opacity-60",style:{color:"var(--text-primary)"},children:"홍채"})}),e.jsx("div",{className:"flex-1 relative cursor-pointer",style:{backgroundColor:a.eyeColor},children:e.jsx("input",{type:"color",value:a.eyeColor,onChange:t=>n({...a,eyeColor:t.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black opacity-40 uppercase tracking-widest flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(ce,{size:14})," 별칭"]}),e.jsx("div",{className:"flex flex-wrap gap-1 max-h-20 overflow-y-auto custom-scrollbar",children:a.aliases.map(t=>e.jsxs("span",{className:"pl-2 pr-1 py-1 rounded-lg bg-white/40 border border-white/20 text-[9px] font-bold flex items-center gap-1 group hover:bg-white/60 transition-all",style:{color:"var(--text-primary)"},children:[t,e.jsx("button",{onClick:()=>n({...a,aliases:a.aliases.filter(s=>s!==t)}),className:"opacity-40 hover:opacity-100 hover:text-rose-500",children:e.jsx(I,{size:10})})]},t))}),Xe?e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{ref:ee,type:"text",value:fe,onChange:t=>ve(t.target.value),onKeyDown:t=>t.key==="Enter"&&it(),placeholder:"별명 입력...",className:"flex-1 bg-white/30 border border-white/20 rounded-lg px-2.5 py-1.5 text-[10px] outline-none placeholder:opacity-70",style:{color:"var(--text-primary)"}}),e.jsx("button",{onClick:()=>H(me,ee),style:{color:a.hairColor},className:"p-1.5 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:e.jsx(I,{size:14})})]}):e.jsxs("button",{onClick:()=>H(me,ee),style:{color:a.hairColor},className:"flex items-center gap-1 text-[10px] font-black opacity-50 hover:opacity-100 transition-all",children:[e.jsx(oe,{size:12})," 별칭 추가"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black opacity-40 uppercase tracking-widest flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(ce,{size:14})," 태그"]}),e.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto custom-scrollbar",children:a.labels.map(t=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 rounded-lg bg-white/20 border border-white/20 group",children:[e.jsx("span",{className:"text-[9px] font-black opacity-50",style:{color:"var(--text-primary)"},children:t.key}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-bold",style:{color:"var(--text-primary)"},children:t.value}),e.jsx("button",{onClick:()=>n({...a,labels:a.labels.filter(s=>s.id!==t.id)}),className:"opacity-0 group-hover:opacity-100 hover:text-rose-500 transition-opacity",children:e.jsx(ne,{size:10})})]})]},t.id))}),Ze?e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{ref:te,type:"text",value:ae,onChange:t=>je(t.target.value),placeholder:"라벨",className:"w-12 bg-white/30 border border-white/20 rounded-lg px-2.5 py-1.5 text-[10px] outline-none placeholder:opacity-70",style:{color:"var(--text-primary)"}}),e.jsx("input",{type:"text",value:se,onChange:t=>we(t.target.value),onKeyDown:t=>t.key==="Enter"&&lt(),placeholder:"내용",className:"flex-1 bg-white/30 border border-white/20 rounded-lg px-2.5 py-1.5 text-[10px] outline-none placeholder:opacity-70",style:{color:"var(--text-primary)"}}),e.jsx("button",{onClick:()=>H(he,te),style:{color:a.hairColor},className:"p-1.5 bg-white/10 rounded-lg hover:bg-white/20 shadow-sm",children:e.jsx(I,{size:14})})]}):e.jsxs("button",{onClick:()=>H(he,te),style:{color:a.hairColor},className:"flex items-center gap-1 text-[10px] font-black opacity-50 hover:opacity-100 transition-all",children:[e.jsx(oe,{size:12})," 태그 추가"]})]}),Ee.length>0&&e.jsxs("div",{className:"space-y-2 pt-3 border-t border-white/10",children:[e.jsxs("label",{className:"text-[10px] font-black opacity-60 uppercase tracking-widest flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(Ct,{size:14})," 인연"]}),e.jsx("div",{className:"space-y-1.5 max-h-32 overflow-y-auto custom-scrollbar",children:Ee.map(t=>{const s=t.char1Name===a.name?t.char2Name:t.char1Name,x=[t.char1Name,t.char2Name].sort().join("_"),g=tt[x]||"";let m=ft.find(K=>K.value===g),B=m?m.label:"미지",T=m?m.color:"#64748b",L=m?m.icon:e.jsx(wt,{size:10});return!m&&g.startsWith("custom:")&&(B=g.replace("custom:",""),T="#3b82f6",L=e.jsx(G,{size:10})),e.jsxs("div",{className:"flex items-center justify-between px-2.5 py-2 rounded-xl bg-white/20 border border-white/20 group hover:bg-white/40 transition-all shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center shadow-inner",style:{backgroundColor:`${T}30`,color:T},children:L}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold leading-tight",style:{color:"var(--text-primary)"},children:s}),e.jsx("span",{className:"text-[8px] font-black opacity-50 uppercase tracking-tighter",style:{color:T},children:B})]})]}),e.jsx("span",{className:"text-[10px] font-black text-amber-500 bg-amber-500/10 px-1.5 rounded-lg border border-amber-500/20",children:t.result.chemistryScore})]},t.id)})})]}),e.jsxs("div",{className:"space-y-2 pt-3 border-t border-white/10",children:[e.jsxs("label",{className:"text-[10px] font-black opacity-40 uppercase tracking-widest flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(Pt,{size:14})," 서사 카테고리"]}),e.jsxs("select",{value:a.category||"",onChange:t=>n({...a,category:t.target.value}),className:"w-full bg-white/30 border border-white/20 rounded-xl px-2.5 py-1.5 text-[10px] outline-none font-bold cursor-pointer transition-all hover:bg-white/40",style:{color:"var(--text-primary)"},children:[e.jsx("option",{value:"",className:"bg-slate-900 text-white",children:"미분류"}),rt.map(t=>e.jsx("option",{value:t.id,className:"bg-slate-900 text-white",children:t.name},t.id))]}),e.jsxs("button",{onClick:()=>y==null?void 0:y(a.name),className:"w-full mt-1.5 flex items-center justify-center gap-2 py-2.5 rounded-xl font-black text-[10px] border transition-all uppercase tracking-widest",style:{backgroundColor:`${a.hairColor}20`,color:a.hairColor,borderColor:`${a.hairColor}30`},children:[e.jsx(bt,{size:12})," 심층 분석 이동"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-transparent relative overflow-hidden",children:[e.jsxs("header",{className:`fixed md:absolute inset-x-0 top-0 z-40 md:z-20 px-4 md:px-8 py-2 md:py-5 border-b border-white/20 flex flex-col items-center justify-center bg-white/10 backdrop-blur-md transition-all duration-500 ease-in-out ${X?"translate-y-0 opacity-100":"-translate-y-full opacity-0 md:translate-y-0 md:opacity-100"}`,children:[e.jsx("input",{className:"text-lg md:text-3xl font-black bg-transparent border-none outline-none focus:ring-0 w-full tracking-tighter text-center",value:a.name,onChange:t=>n({...a,name:t.target.value}),style:{color:"var(--text-primary)"}}),e.jsx("div",{className:"w-full h-auto mt-0.5 flex items-center justify-center relative group/marquee-area max-w-full overflow-hidden",children:M?e.jsx("textarea",{autoFocus:!0,className:"text-[10px] md:text-sm font-bold bg-white/10 border-none outline-none focus:ring-1 focus:ring-indigo-500 w-[90%] md:w-[80%] rounded-lg px-3 py-1.5 text-center resize-none custom-scrollbar",rows:2,value:((De=a.analysisData)==null?void 0:De.oneLineSummary)||"",onChange:t=>n({...a,analysisData:{...a.analysisData,oneLineSummary:t.target.value}}),onBlur:()=>w(!1),onKeyDown:t=>t.key==="Enter"&&!t.shiftKey&&w(!1),style:{color:"var(--text-primary)"}}):e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"text-[10px] md:text-sm opacity-60 italic font-bold text-center cursor-pointer px-4 w-[90%] md:w-[80%] hover:opacity-100 transition-all leading-relaxed line-clamp-1",style:{color:"var(--text-primary)"},onClick:()=>w(!0),children:J((Me=a.analysisData)==null?void 0:Me.oneLineSummary)||"캐치 프레이즈 입력"})})}),e.jsx("button",{onClick:h,className:"absolute right-2 md:right-5 top-1/2 -translate-y-1/2 p-2 hover:bg-black/5 rounded-full transition-all group",style:{color:"var(--text-primary)"},children:e.jsx(I,{className:"group-hover:rotate-90 transition-transform",size:18})})]}),e.jsxs("div",{ref:O,className:"flex-1 overflow-y-auto custom-scrollbar p-3 md:p-8 space-y-6 md:space-y-10 pb-28 pt-20 md:pt-32",children:[e.jsxs("div",{className:"w-full h-32 md:h-56 relative group rounded-xl md:rounded-[2.5rem] overflow-hidden shadow-sm border border-white/40 shrink-0",onClick:()=>{var t;return(t=ze.current)==null?void 0:t.click()},children:[(_e=a.additionalImages)!=null&&_e[0]?e.jsx("img",{src:a.additionalImages[0],className:"w-full h-full object-cover",alt:"Banner"}):e.jsx("div",{className:"w-full h-full bg-white/20 backdrop-blur-sm"}),e.jsx("div",{className:"absolute inset-0 bg-white/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity cursor-pointer font-black text-[8px] md:text-[10px] uppercase tracking-[0.3em] backdrop-blur-sm text-center px-4",style:{color:"var(--text-primary)"},children:"배경 변경"}),e.jsx("input",{type:"file",ref:ze,className:"hidden",accept:"image/*",onChange:t=>{var o;const s=(o=t.target.files)==null?void 0:o[0];if(s){const x=new FileReader;x.onload=g=>{var m;return n({...a,additionalImages:[(m=g.target)==null?void 0:m.result]})},x.readAsDataURL(s)}}})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3",children:[e.jsx(Y,{result:a.analysisData,type:"mbti",themeColor:a.hairColor??"var(--text-primary)",onClick:()=>V("mbti")}),e.jsx(Y,{result:a.analysisData,type:"enneagram",themeColor:a.hairColor??"var(--text-primary)",onClick:()=>V("enneagram")}),e.jsx(Y,{result:a.analysisData,type:"archetype",themeColor:a.hairColor??"var(--text-primary)",onClick:()=>V("archetype")}),e.jsx(Y,{result:a.analysisData,type:"symbol",themeColor:a.hairColor??"var(--text-primary)",onClick:()=>V("symbol")})]}),e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{id:"section-appearance",className:"space-y-3 group",children:[e.jsxs("button",{onClick:()=>A("appearance"),className:P,style:{color:"var(--text-primary)"},children:[e.jsxs("span",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(gt,{size:16,style:{color:a.hairColor}})," 캐릭터 외관"]}),v.appearance?e.jsx(R,{size:16}):e.jsx(F,{size:16})]}),!v.appearance&&e.jsx("textarea",{className:"w-full h-24 md:h-40 bg-white/20 border border-white/20 rounded-xl md:rounded-[2rem] p-3 md:p-6 text-xs md:text-sm leading-relaxed outline-none resize-none transition-all shadow-inner custom-scrollbar",value:a.appearance||"",onChange:t=>n({...a,appearance:t.target.value}),placeholder:"특징 묘사...",style:{color:"var(--text-primary)"}})]}),e.jsxs("div",{id:"section-notes",className:"space-y-3 group",children:[e.jsxs("button",{onClick:()=>A("notes"),className:P,style:{color:"var(--text-primary)"},children:[e.jsxs("span",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(Ke,{size:16,style:{color:a.hairColor}})," 설정 노트"]}),v.notes?e.jsx(R,{size:16}):e.jsx(F,{size:16})]}),!v.notes&&e.jsx("textarea",{className:"w-full h-24 md:h-40 bg-white/20 border border-white/20 rounded-xl md:rounded-[2rem] p-3 md:p-6 text-xs md:text-sm leading-relaxed outline-none resize-none transition-all shadow-inner custom-scrollbar",value:a.notes||"",onChange:t=>n({...a,notes:t.target.value}),placeholder:"설정 기록...",style:{color:"var(--text-primary)"}})]}),e.jsxs("div",{id:"section-analysis",className:"space-y-3 group",children:[e.jsxs("button",{onClick:()=>A("analysis"),className:P,style:{color:"var(--text-primary)"},children:[e.jsxs("span",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(W,{size:16,style:{color:a.hairColor}})," 심리 분석"]}),v.analysis?e.jsx(R,{size:16}):e.jsx(F,{size:16})]}),!v.analysis&&e.jsx("div",{className:"p-4 md:p-7 rounded-xl md:rounded-[2rem] bg-white/30 border border-white/20 text-xs md:text-sm leading-loose text-justify shadow-sm backdrop-blur-md",style:{color:"var(--text-primary)"},children:J((Ae=a.analysisData)==null?void 0:Ae.detailedAnalysis)||"데이터 없음"})]}),e.jsxs("div",{id:"section-shadow",className:"space-y-3 group",children:[e.jsxs("button",{onClick:()=>A("shadow"),className:P,style:{color:"var(--text-primary)"},children:[e.jsxs("span",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(jt,{size:16,style:{color:a.hairColor}})," 그림자"]}),v.shadow?e.jsx(R,{size:16}):e.jsx(F,{size:16})]}),!v.shadow&&e.jsx("div",{className:"p-4 md:p-7 rounded-xl md:rounded-[2rem] bg-white/30 border border-white/20 text-xs md:text-sm leading-loose text-justify shadow-sm backdrop-blur-md",style:{color:"var(--text-primary)"},children:J((Pe=a.analysisData)==null?void 0:Pe.hiddenPsychology)||"데이터 없음"})]}),e.jsxs("div",{id:"section-biography",className:"space-y-4 group",children:[e.jsxs("button",{onClick:()=>A("biography"),className:P,style:{color:"var(--text-primary)"},children:[e.jsxs("span",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(vt,{size:16,style:{color:a.hairColor}}),"캐릭터 약력"]}),v.biography?e.jsx(R,{size:16}):e.jsx(F,{size:16})]}),!v.biography&&e.jsxs("div",{className:"space-y-4 md:space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col gap-1.5 p-2 md:p-4 rounded-xl md:rounded-3xl bg-white/10 border border-white/10 shadow-inner",children:[e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{type:"date",value:re,onChange:t=>ke(t.target.value),className:"bg-white/10 border border-white/10 rounded-lg px-2 py-1 text-[10px] font-bold text-white outline-none flex-1"}),e.jsx("button",{onClick:ot,style:{backgroundColor:a.hairColor},className:"px-4 rounded-lg text-white hover:opacity-80 transition-all font-black text-[10px]",children:"추가"})]}),e.jsx("input",{type:"text",value:ie,onChange:t=>Ce(t.target.value),placeholder:"사건 기록...",className:"w-full bg-white/10 border border-white/10 rounded-lg px-3 py-1.5 text-xs font-bold text-white outline-none"})]}),e.jsxs("div",{className:"relative pl-3 md:pl-6 space-y-4 md:space-y-8",style:{color:"var(--text-primary)"},children:[e.jsx("div",{className:"absolute left-[5.5px] md:left-[11px] top-2 bottom-2 w-[1.5px] md:w-[2px]",style:{backgroundColor:`${a.hairColor}40`}}),Te.length===0?e.jsx("div",{className:"text-center py-4 opacity-40 text-[10px] md:text-[12px] font-bold",children:"기록이 없습니다."}):Te.map(t=>e.jsxs("div",{className:"relative flex items-start gap-3 md:gap-6 group/bio",children:[e.jsx("div",{className:"absolute -left-[19px] md:-left-[19.5px] top-1.5 w-3 h-3 md:w-4 md:h-4 rounded-full border-2 md:border-4 border-[var(--bg-to)] shadow-lg z-10",style:{backgroundColor:a.hairColor}}),e.jsxs("div",{className:"flex-1 p-3 md:p-5 rounded-xl md:rounded-3xl bg-white/10 border border-white/10 group-hover/bio:border-indigo-500/40 transition-all shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[Ge===t.id?e.jsx("input",{autoFocus:!0,type:"date",className:"bg-white/10 border border-white/20 rounded-lg px-2 py-1 text-[9px] font-bold text-white outline-none",value:t.date,onChange:s=>nt(t.id,s.target.value),onBlur:()=>q(null),onKeyDown:s=>s.key==="Enter"&&q(null)}):e.jsx("span",{className:"text-[10px] md:text-[12px] font-bold cursor-pointer hover:underline",style:{color:a.hairColor},onClick:()=>q(t.id),children:t.date}),e.jsx("button",{onClick:()=>n({...a,biography:a.biography.filter(s=>s.id!==t.id)}),className:"opacity-40 group-hover/bio:opacity-100 text-rose-500 transition-opacity",children:e.jsx(ne,{size:10})})]}),e.jsx("div",{className:"relative",children:We===t.id?e.jsx("textarea",{autoFocus:!0,className:"w-full bg-white/10 border border-white/20 rounded-lg p-2 text-[10px] md:text-[12px] font-bold text-white outline-none resize-none custom-scrollbar",rows:3,value:t.event,onChange:s=>ct(t.id,s.target.value),onBlur:()=>Z(null),onKeyDown:s=>s.key==="Enter"&&!s.shiftKey&&Z(null)}):e.jsx("div",{className:"text-[10px] md:text-[12px] font-bold opacity-90 leading-relaxed cursor-pointer hover:bg-white/5 rounded-lg transition-all p-1",onClick:()=>Z(t.id),children:J(t.event)})})]})]},t.id))]})]})]}),e.jsxs("div",{id:"section-gallery",className:"space-y-3 group pt-4 pb-20 border-t border-white/10",children:[e.jsxs("button",{onClick:()=>A("gallery"),className:P,style:{color:"var(--text-primary)"},children:[e.jsxs("span",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(Ft,{size:16,style:{color:a.hairColor}})," 갤러리"]}),v.gallery?e.jsx(R,{size:16}):e.jsx(F,{size:16})]}),!v.gallery&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:[(a.galleryImages||[]).map((t,s)=>e.jsxs("div",{className:"relative aspect-square rounded-xl md:rounded-3xl overflow-hidden group/item border border-white/40 shadow-sm cursor-zoom-in",onClick:()=>ye(t),children:[e.jsx("img",{src:t,className:"w-full h-full object-cover transition-transform group-hover/item:scale-110",alt:"Gallery"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover/item:opacity-100 flex items-center justify-center",children:e.jsx(Bt,{className:"text-white",size:20})}),e.jsx("button",{onClick:o=>{var x;o.stopPropagation(),n({...a,galleryImages:(x=a.galleryImages)==null?void 0:x.filter((g,m)=>m!==s)})},className:"absolute top-1.5 right-1.5 p-1.5 bg-black/40 rounded-lg text-white opacity-0 group-hover/item:opacity-100 transition-opacity",children:e.jsx(ne,{size:10})})]},s)),e.jsxs("button",{onClick:()=>{var t;return(t=Ie.current)==null?void 0:t.click()},className:"aspect-square rounded-xl md:rounded-3xl border-2 border-dashed border-black/10 flex flex-col items-center justify-center gap-1 hover:bg-black/5 transition-all opacity-30 hover:opacity-100",style:{color:"var(--text-primary)"},children:[e.jsx(oe,{size:20}),e.jsx("span",{className:"text-[7px] md:text-[9px] font-black uppercase tracking-widest",children:"추가"}),e.jsx("input",{type:"file",ref:Ie,className:"hidden",accept:"image/*",onChange:t=>{var o;const s=(o=t.target.files)==null?void 0:o[0];if(s){const x=new FileReader;x.onload=g=>{var m;return n({...a,galleryImages:[...a.galleryImages||[],(m=g.target)==null?void 0:m.result]})},x.readAsDataURL(s)}}})]})]})]})]})]}),e.jsx("footer",{className:"fixed md:absolute bottom-0 left-0 right-0 p-3 md:p-4 border-t border-white/20 flex justify-end items-center bg-white/20 md:bg-white/40 backdrop-blur-2xl z-50 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx("button",{onClick:h,className:"flex-1 md:flex-none px-4 md:px-5 py-2 md:py-2.5 rounded-xl text-[9px] md:text-[10px] font-black opacity-60 hover:opacity-100 tracking-widest transition-all bg-black/10 md:bg-transparent",style:{color:"var(--text-primary)"},children:"취소"}),e.jsxs("button",{onClick:()=>{k(a),h()},className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 md:px-8 py-2 md:py-2.5 text-white font-black rounded-xl shadow-lg transition-all hover:scale-105 active:scale-95 group text-[10px]",style:{backgroundColor:a.eyeColor,color:Ye(a.eyeColor||"#ffffff")},children:[e.jsx(St,{size:14})," 저장"]})]})})]})]})]})},oa=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));export{F as C,Pt as F,Ke as P,Xt as a,oa as b};
