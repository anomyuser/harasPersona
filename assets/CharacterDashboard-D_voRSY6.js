const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CharacterDetailModal-DwdzNZzN.js","./index-BrxcLGeD.js","./index-CQ3EfDEq.css","./RelationshipResultView-Dqa_LGhW.js","./x-BVOO3rRw.js","./zap-DVssP9Ig.js","./check-DawilqLo.js","./share-2-D_yvVxY1.js","./RadarChart-ClWn9KuN.js","./palette-C6nRAHMr.js","./users-Cir3es1S.js","./save-63v6V0ng.js"])))=>i.map(i=>d[i]);
import{c as J,r as o,j as e,L as Z,a as le,s as Y,S as ee,D as ne,d as oe,T as ie,i as ce,_ as de}from"./index-BrxcLGeD.js";import{L as me,c as pe,C as xe}from"./RelationshipResultView-Dqa_LGhW.js";import{A as ue}from"./AnalysisChart-CB346sqL.js";import{M as ae,U as te}from"./MessageModal-BF3EKuuJ.js";import{X as he}from"./x-BVOO3rRw.js";import{B as ge,F as fe}from"./share-2-D_yvVxY1.js";import{U as re}from"./users-Cir3es1S.js";import{L as be}from"./RadarChart-ClWn9KuN.js";import{A as ye}from"./arrow-right-B5W3ZTPT.js";import"./zap-DVssP9Ig.js";import"./check-DawilqLo.js";import"./circle-alert-BoEv356N.js";/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Q=J("arrow-right-left",ve);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Ne=J("file-braces",je);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],ke=J("git-compare",we);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],De=J("network",Ce),ze=({onSubmit:u,isLoading:j,initialName:h=""})=>{const[N,C]=o.useState(h),[x,d]=o.useState("");o.useEffect(()=>{h&&C(h)},[h]);const g=i=>{i.preventDefault(),N.trim()&&u({name:Y(N),description:Y(x)})};return e.jsxs("div",{className:"w-full max-w-lg mx-auto glass-panel p-8 rounded-3xl shadow-2xl animate-fade-in border border-white/5",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-500",children:"HarasPersona"}),e.jsx("p",{className:"text-slate-400",children:"캐릭터 분석 도우미"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-300 mb-2",children:"캐릭터 이름 / 키워드"}),e.jsx("input",{id:"name",type:"text",required:!0,value:N,onChange:i=>C(i.target.value),placeholder:"예: 조커, 해리포터, 혹은 '지친 회사원'",className:"w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-white placeholder-slate-500 transition-all outline-none",disabled:j})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-300",children:"상세 설명"}),e.jsxs("span",{className:`text-[10px] font-bold ${x.length>=300?"text-rose-500":"text-slate-500"}`,children:[x.length," / 300"]})]}),e.jsx("textarea",{id:"description",rows:4,maxLength:300,value:x,onChange:i=>d(i.target.value),placeholder:"캐릭터의 성격, 행동 양식, 혹은 특정 상황을 입력하면 더 정확한 분석이 가능합니다. (최대 300자)",className:"w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-white placeholder-slate-500 transition-all outline-none resize-none",disabled:j})]}),e.jsx("button",{type:"submit",disabled:j||!N.trim(),className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 text-white font-bold rounded-xl shadow-lg hover:shadow-indigo-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 group",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"animate-spin"}),"분석 중입니다..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"group-hover:scale-110 transition-transform",size:20}),"심리 분석 시작"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"Powered by Google Gemini 3 Flash"})})]})},Ue=({onAnalyze:u,isLoading:j,savedCharacters:h,onSaveCharacter:N,narrativeLogs:C=[],initialSelections:x})=>{var R,O,z,A,V,M;const[d,g]=o.useState(null),[i,D]=o.useState(null),[L,B]=o.useState("select"),[q,K]=o.useState("select"),G=o.useRef(null),W=o.useRef(null),[_,F]=o.useState({isOpen:!1,title:"",message:"",type:"info"});o.useEffect(()=>{if(x&&x[0]&&x[1]){const r=h.find(m=>m.name===x[0]),t=h.find(m=>m.name===x[1]);r&&g({...r.analysisData,imageUrl:r.imageUrl,thumbnailUrl:r.thumbnailUrl}),t&&D({...t.analysisData,imageUrl:t.imageUrl,thumbnailUrl:t.thumbnailUrl})}},[x,h]);const H=(r,t)=>{var b;const m=(b=r.target.files)==null?void 0:b[0];if(!m)return;const c=new FileReader;c.onload=U=>{var k;try{const n=JSON.parse((k=U.target)==null?void 0:k.result);let s;if(n.id&&n.analysisData)s={...n.analysisData,imageUrl:n.imageUrl||null,thumbnailUrl:n.thumbnailUrl||null};else if(n.characterName&&n.mbti)s={...n,imageUrl:n.imageUrl||null,thumbnailUrl:n.thumbnailUrl||null};else throw new Error("Invalid Format");t===1?g(s):D(s),h.some(E=>E.name===s.characterName)||N(s)}catch{F({isOpen:!0,title:"오류",message:"유효하지 않은 파일 형식입니다.",type:"error"})}},c.readAsText(m),r.target.value=""},P=(r,t)=>{const m=r.target.value,c=h.find(b=>b.name===m);if(c){const b={...c.analysisData,imageUrl:c.imageUrl,thumbnailUrl:c.thumbnailUrl};t===1?g(b):D(b)}},X=r=>{r===1?g(null):D(null)},T=()=>{if(!d||!i)return;const r=[d.characterName,i.characterName].sort().join("_"),m=JSON.parse(localStorage.getItem("psychopersona_manual_relationship_types")||"{}")[r]||"";let c="";m&&(m.startsWith("custom:")?c=`사용자가 정의한 관계: ${m.replace("custom:","")}`:c=`사용자가 정의한 관계 유형: ${{friend:"친구",family:"가족",love:"사랑",enemy:"원수(적)",awkward:"어색한 사이"}[m]||m}`);const b=C.filter(n=>{var $;const s=(($=n.characters)==null?void 0:$.map(E=>E.name))||[];return s.includes(d.characterName)&&s.includes(i.characterName)}),U=b.length>0?`최근 서사 기록 요약:
`+b.map(n=>{var s;return`[${n.date}] ${(s=n.analysis)==null?void 0:s.summary}`}).join(`
`):"",k=[c,U].filter(Boolean).join(`

`);u(d,i,k)},w=!!(d&&i);return e.jsxs("div",{className:"w-full max-w-5xl mx-auto space-y-8 animate-fade-in pb-12",children:[e.jsx(ae,{isOpen:_.isOpen,type:_.type,title:_.title,message:_.message,onConfirm:()=>F(r=>({...r,isOpen:!1})),onCancel:()=>F(r=>({...r,isOpen:!1}))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start relative",children:[1,2].map(r=>{var U,k,n;const t=r===1?d:i,m=r===1?B:K,c=r===1?L:q,b=r===1?G:W;return e.jsxs("div",{className:"relative flex-1 w-full",children:[!t&&e.jsxs("div",{className:"flex mb-4 p-1 rounded-xl border backdrop-blur-sm shadow-inner",style:{borderColor:"var(--glass-border)",backgroundColor:"rgba(0,0,0,0.1)"},children:[e.jsx("button",{onClick:()=>m("select"),className:`flex-1 py-2 text-xs font-black rounded-lg transition-all ${c==="select"?"shadow-md":"opacity-60 hover:opacity-100 hover:bg-white/5"}`,style:{backgroundColor:c==="select"?"var(--accent-primary)":"transparent",color:c==="select"?"var(--accent-text)":"var(--text-primary)"},children:"저장된 캐릭터"}),e.jsx("button",{onClick:()=>m("upload"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${c==="upload"?"shadow-md":"opacity-60 hover:opacity-100 hover:bg-white/5"}`,style:{backgroundColor:c==="upload"?"var(--accent-primary)":"transparent",color:c==="upload"?"var(--accent-text)":"var(--text-primary)"},children:"파일 업로드"})]}),t?e.jsxs("div",{className:"glass-panel p-8 rounded-3xl border-2 flex flex-col items-center gap-5 relative overflow-hidden group transition-all duration-500 animate-fade-in-up shadow-2xl bg-black/20",style:{borderColor:"var(--accent-primary)",opacity:.9},children:[e.jsx("button",{onClick:()=>X(r),className:"absolute top-4 right-4 p-2 rounded-full bg-black/10 hover:bg-red-500/20 hover:text-red-400 text-slate-400 z-10",children:e.jsx(he,{size:18})}),e.jsx("div",{className:"relative w-24 h-24 rounded-full flex items-center justify-center mb-1 shadow-inner overflow-hidden border-2",style:{borderColor:"var(--accent-primary)",backgroundColor:"rgba(0,0,0,0.2)"},children:t.thumbnailUrl||t.imageUrl?e.jsx("img",{src:t.thumbnailUrl||t.imageUrl,alt:t.characterName,className:"w-full h-full object-cover"}):e.jsx(Ne,{size:36,style:{color:"var(--accent-primary)"}})}),e.jsxs("div",{className:"text-center space-y-4 w-full",children:[e.jsx("h3",{className:"text-2xl font-black",style:{color:"var(--text-primary)"},children:t.characterName}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsxs("div",{className:"px-3 py-1 rounded-lg bg-indigo-500/10 border border-indigo-500/20 text-[10px] font-black flex items-center gap-1.5 text-indigo-400",children:[e.jsx(ge,{size:12})," ",(U=t.mbti)==null?void 0:U.type]}),e.jsxs("div",{className:"px-3 py-1 rounded-lg bg-purple-500/10 border border-purple-500/20 text-[10px] font-black flex items-center gap-1.5 text-purple-400",children:[e.jsx(fe,{size:12})," ",(k=t.enneagram)==null?void 0:k.type]}),e.jsxs("div",{className:"px-3 py-1 rounded-lg bg-pink-500/10 border border-pink-500/20 text-[10px] font-black flex items-center gap-1.5 text-pink-400",children:[e.jsx(ee,{size:12})," ",(n=t.archetype)==null?void 0:n.name]})]})]})]}):c==="select"?e.jsx("div",{className:"w-full h-80 border-2 border-dashed rounded-3xl flex flex-col items-center justify-center gap-6",style:{borderColor:"var(--glass-border)",backgroundColor:"rgba(0,0,0,0.02)"},children:e.jsxs("select",{onChange:s=>P(s,r),value:"",className:"p-4 rounded-xl border outline-none",style:{backgroundColor:"var(--glass-bg)",borderColor:"var(--glass-border)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",disabled:!0,children:"캐릭터 선택..."}),h.map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))]})}):e.jsxs("button",{onClick:()=>{var s;return(s=b.current)==null?void 0:s.click()},className:"w-full h-80 border-2 border-dashed rounded-3xl flex flex-col items-center justify-center gap-6",style:{borderColor:"var(--glass-border)",backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx(te,{size:40}),e.jsx("span",{className:"font-bold text-lg",style:{color:"var(--text-primary)"},children:"JSON 파일 업로드"})]}),e.jsx("input",{type:"file",ref:b,onChange:s=>H(s,r),accept:".json",className:"hidden"})]},r)})}),w&&e.jsxs("div",{className:"animate-fade-in-up space-y-6 pt-4 border-t",style:{borderColor:"var(--glass-border)"},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",style:{color:"var(--text-primary)"},children:[e.jsx(ke,{size:20,style:{color:"var(--accent-primary)"}}),e.jsx("h3",{className:"text-lg font-black uppercase tracking-tighter",children:"심리 특성 비교"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"glass-panel p-4 rounded-[2rem] border",style:{borderColor:"var(--glass-border)"},children:e.jsx(ue,{data:d.big5,label1:d.characterName,data2:i.big5,label2:i.characterName})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-panel p-5 rounded-2xl flex items-center justify-between border",style:{borderColor:"var(--glass-border)"},children:[e.jsx("div",{style:{color:"var(--accent-primary)"},className:"font-black",children:((R=d.mbti)==null?void 0:R.type)||"N/A"}),e.jsxs("div",{className:"text-xs flex flex-col items-center gap-1 opacity-40 font-black",style:{color:"var(--text-primary)"},children:[e.jsx("span",{children:"MBTI"}),e.jsx(Q,{size:14})]}),e.jsx("div",{style:{color:"var(--accent-primary)"},className:"font-black",children:((O=i.mbti)==null?void 0:O.type)||"N/A"})]}),e.jsxs("div",{className:"glass-panel p-5 rounded-2xl flex items-center justify-between border",style:{borderColor:"var(--glass-border)"},children:[e.jsx("div",{style:{color:"var(--accent-primary)"},className:"font-black",children:((z=d.enneagram)==null?void 0:z.type)||"N/A"}),e.jsxs("div",{className:"text-xs flex flex-col items-center gap-1 opacity-40 font-black",style:{color:"var(--text-primary)"},children:[e.jsx("span",{children:"에니어그램"}),e.jsx(Q,{size:14})]}),e.jsx("div",{style:{color:"var(--accent-primary)"},className:"font-black",children:((A=i.enneagram)==null?void 0:A.type)||"N/A"})]}),e.jsxs("div",{className:"glass-panel p-5 rounded-2xl flex items-center justify-between border",style:{borderColor:"var(--glass-border)"},children:[e.jsx("div",{style:{color:"var(--accent-primary)"},className:"text-sm w-1/3 text-center truncate font-black",children:((V=d.archetype)==null?void 0:V.name)||"N/A"}),e.jsxs("div",{className:"text-xs flex flex-col items-center gap-1 w-1/3 opacity-40 font-black",style:{color:"var(--text-primary)"},children:[e.jsx("span",{children:"융의 원형"}),e.jsx(Q,{size:14})]}),e.jsx("div",{style:{color:"var(--accent-primary)"},className:"text-sm w-1/3 text-center truncate font-black",children:((M=i.archetype)==null?void 0:M.name)||"N/A"})]})]})]})]}),e.jsx("div",{className:"flex justify-center pt-8",children:e.jsxs("button",{onClick:T,disabled:!w||j,className:`flex items-center gap-3 px-10 py-4 font-black rounded-2xl shadow-xl transition-all text-lg ${w?"hover:opacity-90 text-white transform hover:scale-105 shadow-lg":"bg-black/10 text-slate-500 opacity-50"}`,style:{backgroundColor:w?"var(--accent-primary)":"transparent",boxShadow:w?"0 10px 20px -5px color-mix(in srgb, var(--accent-primary) 50%, transparent)":"none"},children:[j?e.jsx(Z,{className:"animate-spin"}):e.jsx(re,{size:24}),j?"관계 분석 중...":"관계 분석 시작"]})})]})},Se=o.lazy(()=>de(()=>import("./CharacterDetailModal-DwdzNZzN.js").then(u=>u.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),Ie=u=>{if(!u||!u.startsWith("#"))return .5;const j=u.substring(1),h=parseInt(j,16),N=h>>16&255,C=h>>8&255,x=h>>0&255,d=[N,C,x].map(g=>(g/=255,g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)));return .2126*d[0]+.7152*d[1]+.0722*d[2]},_e=u=>Ie(u)>.5?"#0f172a":"#f8fafc",Pe=({savedCharacters:u,savedRelationships:j,onSubmitAnalysis:h,isLoading:N,onSelectCharacter:C,onUpdateProfile:x,onDeleteProfile:d,activeTab:g,onTabChange:i,narrativeLogs:D,onAnalyzeRelationship:L,onReorderCharacters:B,initialNameForNew:q="",preSelectedRelChars:K,onNavigateToRelLab:G,onDeleteRelationshipLog:W,onUpdateRelationshipLog:_})=>{const F=o.useRef(null),H=o.useRef(null),[P,X]=o.useState(null),[T,w]=o.useState(null),[R,O]=o.useState({isOpen:!1,id:"",name:""}),[z,A]=o.useState(null),[V,M]=o.useState(null),r=o.useMemo(()=>getComputedStyle(document.documentElement).getPropertyValue("--bg-from").trim()||"#0f172a",[]),t=o.useMemo(()=>_e(r),[r]),m=a=>A(a),c=(a,l)=>{a.preventDefault(),M(l)},b=(a,l)=>{if(a.preventDefault(),z===null||z===l||!B)return;const p=[...u],[y]=p.splice(z,1);p.splice(l,0,y),B(p),A(null),M(null)},U=()=>{A(null),M(null)},k=(a,l)=>{var p;a.stopPropagation(),X(l),(p=F.current)==null||p.click()},n=a=>{var y;const l=(y=a.target.files)==null?void 0:y[0];if(!l||!P)return;const p=new FileReader;p.onload=S=>{var f;const I=(f=S.target)==null?void 0:f.result,v=u.find(se=>se.name===P);v&&x({...v,thumbnailUrl:I})},p.readAsDataURL(l),a.target.value=""},s=a=>{var y;const l=(y=a.target.files)==null?void 0:y[0];if(!l)return;const p=new FileReader;p.onload=async S=>{var I;try{const v=JSON.parse((I=S.target)==null?void 0:I.result);let f;if(v.id&&v.analysisData)f=v;else if(v.characterName&&v.mbti)f={id:crypto.randomUUID(),name:v.characterName,aliases:[],analysisData:v,labels:[],biography:[]};else throw new Error("Invalid Format");await x(f)}catch{console.error("캐릭터 불러오기 실패")}},p.readAsText(l),a.target.value=""},$=a=>{const l=D.filter(p=>{var y;return(y=p.characters)==null?void 0:y.some(S=>S.name===a.name)}).sort((p,y)=>new Date(p.date).getTime()-new Date(y.date).getTime());h(a,l)},E=()=>{switch(g){case"new":return e.jsx("div",{className:"w-full flex flex-col items-center justify-center animate-fade-in py-8",children:e.jsx(ze,{onSubmit:$,isLoading:N,initialName:q})});case"relationship":return e.jsx("div",{className:"w-full animate-fade-in",children:e.jsx(Ue,{onAnalyze:L,isLoading:N,savedCharacters:u,onSaveCharacter:a=>x({id:crypto.randomUUID(),name:a.characterName,aliases:[],analysisData:a,labels:[],biography:[]}),narrativeLogs:D,initialSelections:K})});case"list":return e.jsx("div",{className:"animate-fade-in w-full max-w-6xl mx-auto px-2",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:[u.map((a,l)=>{var p,y,S,I,v;return e.jsxs("div",{onClick:()=>w(a),draggable:!0,onDragStart:()=>m(l),onDragOver:f=>c(f,l),onDrop:f=>b(f,l),onDragEnd:U,className:`glass-panel p-4 md:p-6 rounded-[1.5rem] md:rounded-[2rem] border transition-all hover:-translate-y-2 hover:shadow-2xl cursor-pointer group flex flex-col items-center text-center relative overflow-hidden ${z===l?"opacity-40 grayscale scale-95":""} ${V===l&&z!==l?"border-l-4 border-l-[var(--accent-primary)] shadow-[inset_10px_0_10px_-10px_var(--accent-primary)]":""}`,style:{borderColor:"var(--glass-border)",backgroundColor:"color-mix(in srgb, var(--accent-primary) 15%, var(--bg-from))",minHeight:"min(30vh, 200px)"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--accent-primary)] to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex gap-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:f=>{f.stopPropagation(),oe.exportCharacter(a)},className:"p-1.5 md:p-2 rounded-full bg-black/40 text-[var(--accent-primary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] transition-all",title:"내보내기",children:e.jsx(ne,{size:12})}),e.jsx("button",{onClick:f=>{f.stopPropagation(),O({isOpen:!0,id:a.id,name:a.name})},className:"p-1.5 md:p-2 rounded-full bg-black/40 text-rose-400 hover:bg-rose-500 hover:text-white transition-all",title:"삭제",children:e.jsx(ie,{size:12})})]}),e.jsxs("div",{className:"w-16 h-16 md:w-28 md:h-28 rounded-full mb-3 md:mb-5 overflow-hidden bg-black/10 flex items-center justify-center relative group/avatar transition-all ring-2 ring-transparent group-hover:ring-[var(--accent-primary)] group-hover:ring-offset-2 group-hover:ring-offset-[var(--bg-from)] group-hover:scale-105",children:[a.thumbnailUrl?e.jsx("img",{src:a.thumbnailUrl,alt:a.name,className:"w-full h-full object-cover"}):e.jsx(xe,{size:32,className:"text-slate-400 md:size-[56px] opacity-30"}),e.jsx("div",{onClick:f=>k(f,a.name),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/avatar:opacity-100 transition-opacity cursor-pointer",children:e.jsx(ce,{size:18,className:"text-white md:size-[24px]"})})]}),e.jsx("h3",{className:"text-base md:text-xl font-black mb-1",style:{color:t},children:a.name}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mb-2 md:mb-4",children:[e.jsx("span",{className:"text-[7px] md:text-[8px] px-1.5 py-0.5 rounded-full font-black uppercase tracking-tighter flex items-center gap-1 shadow-sm",style:{backgroundColor:"var(--accent-primary)",color:"var(--accent-text)"},children:((y=(p=a.analysisData)==null?void 0:p.mbti)==null?void 0:y.type)||"??"}),((I=(S=a.analysisData)==null?void 0:S.symbolicImage)==null?void 0:I.symbol)&&e.jsxs("span",{className:"text-[7px] md:text-[8px] px-1.5 py-0.5 rounded-full bg-emerald-500/10 text-emerald-400 font-black uppercase tracking-tighter flex items-center gap-1 shadow-sm",children:[e.jsx(be,{className:"w-[7px] h-[7px] md:w-2 md:h-2"})," ",a.analysisData.symbolicImage.symbol]})]}),e.jsxs("p",{className:"text-[9px] md:text-xs opacity-60 line-clamp-1 md:line-clamp-2 leading-relaxed italic",style:{color:t},children:['"',((v=a.analysisData)==null?void 0:v.oneLineSummary)||"",'"']}),e.jsxs("div",{className:"mt-3 md:mt-5 pt-3 md:pt-5 border-t w-full flex items-center justify-center gap-1 text-[8px] md:text-[10px] font-black text-[var(--accent-primary)] opacity-0 group-hover:opacity-100 transition-all transform translate-y-2 group-hover:translate-y-0",style:{borderColor:"var(--glass-border)"},children:["정보 상세보기 ",e.jsx(ye,{size:10})]})]},a.id)}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>i("new"),className:"glass-panel p-4 md:p-6 rounded-[1.5rem] md:rounded-[2.5rem] border border-dashed flex flex-col items-center justify-center gap-2 md:gap-4 transition-all hover:bg-white/5 opacity-50 hover:opacity-100 flex-1 group",style:{borderColor:t},children:[e.jsx("div",{className:"p-2 md:p-4 rounded-full bg-black/5 transition-transform group-hover:rotate-12",children:e.jsx(ee,{className:"w-5 h-5 md:w-8 md:h-8",style:{color:t}})}),e.jsx("span",{className:"font-black text-xs uppercase tracking-widest",style:{color:t},children:"새 캐릭터"})]}),e.jsxs("button",{onClick:()=>{var a;return(a=H.current)==null?void 0:a.click()},className:"glass-panel p-4 md:p-6 rounded-[1.5rem] md:rounded-[2.5rem] border border-dashed flex flex-col items-center justify-center gap-2 md:gap-4 transition-all hover:bg-white/5 opacity-50 hover:opacity-100 flex-1 group",style:{borderColor:t},children:[e.jsx("div",{className:"p-2 md:p-4 rounded-full bg-black/5 transition-transform group-hover:scale-110",children:e.jsx(te,{className:"w-5 h-5 md:w-8 md:h-8",style:{color:t}})}),e.jsx("span",{className:"font-black text-xs uppercase tracking-widest",style:{color:t},children:"불러오기"})]})]})]})});case"map":return e.jsx("div",{className:"animate-fade-in w-full max-w-6xl mx-auto",children:e.jsx(pe,{profiles:u,relationships:j,onNavigateToRelLab:(a,l)=>{G?G(a,l):i("relationship")},narrativeLogs:D,onAnalyzeRelationship:L,onDeleteRelationshipLog:W,onUpdateRelationshipLog:_})})}};return e.jsxs("div",{className:"w-full min-h-full",children:[e.jsx("input",{type:"file",ref:F,onChange:n,accept:"image/*",className:"hidden"}),e.jsx("input",{type:"file",ref:H,onChange:s,accept:".json",className:"hidden"}),e.jsx(ae,{isOpen:R.isOpen,type:"confirm",title:"캐릭터 삭제",message:`'${R.name}' 캐릭터 데이터를 정말로 삭제하시겠습니까?
이 작업은 되돌릴 수 없습니다.`,onConfirm:()=>{d(R.id),O({isOpen:!1,id:"",name:""})},onCancel:()=>O({isOpen:!1,id:"",name:""})}),e.jsx("div",{className:"flex justify-end md:justify-center mb-6 md:mb-10 px-2 md:px-0",children:e.jsx("div",{className:"flex p-1 rounded-2xl backdrop-blur-xl border shadow-2xl",style:{backgroundColor:"var(--glass-bg)",borderColor:"var(--glass-border)"},children:[{id:"list",label:"목록",icon:e.jsx(me,{size:14})},{id:"map",label:"관계도",icon:e.jsx(De,{size:14})},{id:"relationship",label:"연구소",icon:e.jsx(re,{size:14})}].map(a=>e.jsxs("button",{onClick:()=>i(a.id),className:`px-4 md:px-6 py-2 md:py-3 rounded-xl text-[11px] md:text-sm font-black transition-all flex items-center gap-2 ${g===a.id?"shadow-xl scale-[1.02]":"opacity-40 hover:opacity-100 hover:bg-white/5"}`,style:{backgroundColor:g===a.id?"var(--accent-primary)":"transparent",color:g===a.id?"var(--accent-text)":"var(--text-primary)"},children:[a.icon," ",e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id))})}),E(),T&&e.jsx(o.Suspense,{fallback:null,children:e.jsx(Se,{character:T,isOpen:!!T,onClose:()=>w(null),onSave:a=>{x(a),w(null)},onDelete:a=>{d(a),w(null)},onGoToAnalysis:C})})]})};export{Pe as default};
